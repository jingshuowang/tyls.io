<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UI Library (Inline)</title>
    <style>
        body {
            /* Real Background so you can see Blur */
            background-image: url('Assets/Image/Tile/grass.png');
            background-size: 64px;
            image-rendering: pixelated;
            margin: 0;
            overflow: hidden;
            font-family: monospace;
            background-color: #222;
        }

        /* Prevent Selection */
        .ui-frame,
        button,
        h2 {
            user-select: none;
        }

        /* UI FRAME: The Simplest "One Element" Solution */
        .ui-frame {
            position: absolute;
            box-sizing: border-box;
            color: white;
            /* text-shadow: removed per user request */
            --border-size: 16px;

            /* 1. Blur the Middle (Standard size, no bleeding) */
            backdrop-filter: blur(3px);
            -webkit-backdrop-filter: blur(3px);

            /* 2. Vignette (Tint close to edge) */
            /* Adjusted: Visible but Cool/Gradual (40px blur, 10% opacity) */
            box-shadow: inset 0 0 40px rgba(255, 255, 255, 0.1);

            /* Filter Removed from Container to protect Text */
        }

        /* BORDER LAYER (::before) - Isolated for Shader */
        .ui-frame::before {
            content: "";
            position: absolute;
            inset: 0;
            z-index: 2;
            pointer-events: none;

            border: var(--border-size) solid transparent;
            border-image: url('Assets/Image/frame.png') 16 / var(--border-size) repeat;

            /* 3. RED SCREEN SHADER (SVG Filter) - Applied ONLY to Border */
            filter: url(#remove-red);
        }

        /* REMOVED Button Styles (User requested) */
    </style>
</head>

<body>
    <!-- SVG SHADER: The "Green Screen" logic for HTML -->
    <svg width="0" height="0" style="position: absolute;">
        <filter id="remove-red">
            <feColorMatrix type="matrix" values="
                1 0 0 0 0  
                0 1 0 0 0  
                0 0 1 0 0  
                -1 1 1 1 0" />
        </filter>
    </svg>

    <!-- UI SYSTEM -->
    <script>
        const UI = {
            config: {
                borderSize: 16, // Tileset is 48x48 (16px tiles)
            },

            init: function () {
                const fontFace = new FontFace('Minecraft', 'url(Assets/Font/pixel.ttf)');
                fontFace.load().then(function (loadedFont) {
                    document.fonts.add(loadedFont);
                    document.body.style.fontFamily = 'Minecraft, monospace';
                    document.body.style.webkitFontSmoothing = 'none';
                    document.body.style.mozOsxFontSmoothing = 'grayscale';
                });
                console.log("UI: Active (SVG Shader Mode)");
            },

            createWindow: function (title, x, y, width, height) {
                const frame = document.createElement('div');
                frame.className = 'ui-frame';
                // Set sizes and dynamic variables
                Object.assign(frame.style, {
                    left: x + 'px', top: y + 'px',
                    width: width + 'px', height: height + 'px',
                });
                frame.style.setProperty('--border-size', this.config.borderSize + 'px');

                // Content Container (Above Glass, Below Border)
                const inner = document.createElement('div');
                Object.assign(inner.style, {
                    position: 'relative', zIndex: '1', height: '100%',
                    display: 'flex', flexDirection: 'column'
                });
                frame.appendChild(inner);

                if (title) {
                    const h2 = document.createElement('h2');
                    h2.innerText = title;
                    h2.style.borderBottom = '1px solid rgba(255,255,255,0.2)';
                    h2.style.textAlign = 'center';
                    h2.style.width = '100%';
                    h2.style.margin = '0';
                    h2.style.padding = '8px 0 2px 0'; // Reduced bottom padding per user request
                    inner.appendChild(h2);
                }

                this._makeDraggable(frame);
                document.body.appendChild(frame);
                inner.parentFrame = frame;
                return inner;
            },

            addButton: function (parent, text, onClick) {
                const btn = document.createElement('div');
                btn.className = 'ui-btn';
                btn.style.height = '32px';
                btn.style.setProperty('--btn-border', '16px');

                const label = document.createElement('span');
                label.innerText = text;
                label.style.zIndex = '2';
                label.style.pointerEvents = 'none';
                btn.appendChild(label);

                btn.onclick = function (e) {
                    e.stopPropagation();
                    onClick();
                };

                parent.appendChild(btn);
                return btn;
            },

            addLabel: function (parent, html) {
                const p = document.createElement('p');
                p.innerHTML = html;
                p.style.margin = '4px 12px';
                p.style.fontSize = '14px';
                p.style.lineHeight = '1.5';
                parent.appendChild(p);
            },

            _makeDraggable: function (el) {
                let isDragging = false;
                let startX, startY, initialLeft, initialTop;

                el.onmousedown = function (e) {
                    if (e.target.className === 'ui-btn' || e.target.onclick) return;
                    isDragging = true;
                    startX = e.clientX;
                    startY = e.clientY;
                    initialLeft = el.offsetLeft;
                    initialTop = el.offsetTop;
                    el.style.cursor = 'grabbing';
                };

                document.onmousemove = function (e) {
                    if (!isDragging) return;
                    const dx = e.clientX - startX;
                    const dy = e.clientY - startY;
                    el.style.left = (initialLeft + dx) + 'px';
                    el.style.top = (initialTop + dy) + 'px';
                };

                document.onmouseup = function () {
                    isDragging = false;
                    el.style.cursor = 'default';
                };
            }
        };
    </script>

    <!-- Main Logic Script -->
    <script>
        UI.init();
        const win = UI.createWindow("Window", 100, 100, 400, 300);
        UI.addLabel(win, "Item: <strong>Lazor Pickaxe</strong>");
        UI.addLabel(win, "Durability: 9000/9001");
        UI.addLabel(win, "<i>'A shiny tool for a shiny person.'</i>");
        // Buttons removed per user request
    </script>
</body>

</html>